<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢</title>
  <style>
    body { font-family: Tahoma, sans-serif; margin: 40px; background: #f9f9f9; }
    h1 { color: #2c3e50; }
    textarea { width: 100%; height: 200px; font-size: 16px; }
    .original { background: #eef; padding: 15px; margin-bottom: 20px; }
    .result { margin-top: 20px; font-weight: bold; }
    .correct { color: green; }
    .wrong { color: red; }
    button { padding: 10px 20px; margin-top: 10px; }
    .stats { margin-top: 15px; }
  </style>
</head>
<body>
  <h1>‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢</h1>
  
  <div class="original">
    <p id="originalText"></p>
  </div>
  
  <textarea id="typingArea" placeholder="‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
  <br>
  <button id="btnRandom">‡∏™‡∏∏‡πà‡∏°‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà</button>
  
  <div class="stats">
    ‚è± ‡πÄ‡∏ß‡∏•‡∏≤: <span id="timeDisplay">0.0</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ<br>
    üìä WPM: <span id="wpmDisplay">0</span><br>
    ‚úÖ ‡∏Ñ‡∏≥‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: <span id="correctCount">0</span><br>
    ‚ùå ‡∏Ñ‡∏≥‡∏ú‡∏¥‡∏î: <span id="errorCount">0</span>
  </div>
  
  <div id="highlightResult" class="result"></div>
  
  <script>
    const passages = [
      "‡πÄ‡∏¢‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏•‡∏°‡∏û‡∏±‡∏î‡πÄ‡∏ö‡∏≤ ‡πÜ ‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏ß‡∏ô‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞ ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ä‡∏≠‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏°‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô",
      "‡πÄ‡∏ä‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡∏ù‡∏ô‡∏û‡∏£‡∏≥ ‡∏ú‡∏π‡πâ‡∏Ñ‡∏ô‡∏Å‡∏≤‡∏á‡∏£‡πà‡∏°‡∏´‡∏•‡∏≤‡∏Å‡∏™‡∏µ‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏£‡∏ñ‡πÑ‡∏ü ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏¢‡∏î‡∏ô‡πâ‡∏≥‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞",
      "‡∏¢‡∏≤‡∏°‡∏Ñ‡πà‡∏≥‡∏Ñ‡∏∑‡∏ô ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏™‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏™‡∏á‡πÑ‡∏ü‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ñ‡∏ô‡∏ô ‡∏ú‡∏π‡πâ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à"
    ];
    
    let originalText = "";
    let startTime = null;
    let timerInterval = null;
    
    const elOriginal = document.getElementById("originalText");
    const elTyping = document.getElementById("typingArea");
    const elTime = document.getElementById("timeDisplay");
    const elWpm = document.getElementById("wpmDisplay");
    const elCorrect = document.getElementById("correctCount");
    const elError = document.getElementById("errorCount");
    const elHighlight = document.getElementById("highlightResult");
    const btnRandom = document.getElementById("btnRandom");
    
    function randomizePassage() {
      const idx = Math.floor(Math.random() * passages.length);
      originalText = passages[idx];
      elOriginal.textContent = originalText;
      elTyping.value = "";
      elTime.textContent = "0.0";
      elWpm.textContent = "0";
      elCorrect.textContent = "0";
      elError.textContent = "0";
      elHighlight.innerHTML = "";
      clearInterval(timerInterval);
      startTime = null;
    }
    
    function calcWPM(text, elapsedSeconds) {
      const words = text.trim().split(/\s+/).filter(Boolean).length;
      return elapsedSeconds > 0 ? Math.round((words / elapsedSeconds) * 60) : 0;
    }
    
    function highlightComparison(original, user) {
      const oWords = original.trim().split(/\s+/);
      const uWords = user.trim().split(/\s+/);
      let correct = 0, errors = 0;
      let parts = [];
      
      for (let i = 0; i < uWords.length; i++) {
        if (oWords[i] === uWords[i]) {
          correct++;
          parts.push(`<span class="correct">${uWords[i]}</span>`);
        } else {
          errors++;
          parts.push(`<span class="wrong">${uWords[i]}</span>`);
        }
      }
      
      elCorrect.textContent = correct;
      elError.textContent = errors;
      elHighlight.innerHTML = parts.join(" ");
    }
    
    elTyping.addEventListener("input", () => {
      if (!startTime) {
        startTime = Date.now();
        timerInterval = setInterval(() => {
          const elapsed = (Date.now() - startTime) / 1000;
          elTime.textContent = elapsed.toFixed(1);
          elWpm.textContent = calcWPM(elTyping.value, elapsed);
        }, 200);
      }
      highlightComparison(originalText, elTyping.value);
    });
    
    btnRandom.addEventListener("click", randomizePassage);
    
    randomizePassage(); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡πà‡∏°
  </script>
</body>
</html>
