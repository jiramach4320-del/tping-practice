<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢</title>
  <style>
    body { font-family: Tahoma, sans-serif; margin: 40px; background: #f9f9f9; }
    h1 { color: #2c3e50; }
    .original { background: #eef; padding: 15px; margin-bottom: 20px; }
    .typingArea {
      width: 100%; min-height: 150px; border: 1px solid #ccc;
      padding: 10px; font-size: 16px; background: #fff;
    }
    .correct { color: green; }
    .wrong { color: red; font-weight: bold; }
    button { padding: 10px 20px; margin-top: 10px; }
    .stats { margin-top: 15px; }
  </style>
</head>
<body>
  <h1>‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢</h1>
  
  <div class="original">
    <p id="originalText"></p>
  </div>
  
  <!-- ‡πÉ‡∏ä‡πâ div ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÅ‡∏ó‡∏ô textarea -->
  <div id="typingArea" class="typingArea" contenteditable="true"></div>
  <br>
  <button id="btnRandom">‡∏™‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡πÉ‡∏´‡∏°‡πà</button>
  
  <div class="stats">
    ‚è± ‡πÄ‡∏ß‡∏•‡∏≤: <span id="timeDisplay">0.0</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ<br>
    üìä WPM: <span id="wpmDisplay">0</span><br>
    ‚úÖ ‡∏Ñ‡∏≥‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: <span id="correctCount">0</span><br>
    ‚ùå ‡∏Ñ‡∏≥‡∏ú‡∏¥‡∏î: <span id="errorCount">0</span>
  </div>
  
  <script>
    const passages = [
      "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
      "‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏",
      "‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏î",
      "‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏Ñ‡∏£‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏ö‡πâ‡∏≤‡∏á",
      "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡πÄ‡∏´‡πá‡∏ô"
    ];
    
    let originalText = "";
    let startTime = null;
    let timerInterval = null;
    let testEnded = false;
    
    const elOriginal = document.getElementById("originalText");
    const elTyping = document.getElementById("typingArea");
    const elTime = document.getElementById("timeDisplay");
    const elWpm = document.getElementById("wpmDisplay");
    const elCorrect = document.getElementById("correctCount");
    const elError = document.getElementById("errorCount");
    const btnRandom = document.getElementById("btnRandom");
    
    function randomizePassage() {
      const idx = Math.floor(Math.random() * passages.length);
      originalText = passages[idx];
      elOriginal.textContent = originalText;
      elTyping.innerHTML = "";
      elTime.textContent = "0.0";
      elWpm.textContent = "0";
      elCorrect.textContent = "0";
      elError.textContent = "0";
      clearInterval(timerInterval);
      startTime = null;
      testEnded = false;
    }
    
    function calcWPM(text, elapsedSeconds) {
      const words = text.trim().split(/\s+/).filter(Boolean).length;
      return elapsedSeconds > 0 ? Math.round((words / elapsedSeconds) * 60) : 0;
    }
    
    function highlightText() {
      const oWords = originalText.trim().split(/\s+/);
      const uWords = elTyping.innerText.trim().split(/\s+/);
      let correct = 0, errors = 0;
      let parts = [];
      
      for (let i = 0; i < uWords.length; i++) {
        if (oWords[i] === uWords[i]) {
          correct++;
          parts.push(`<span class="correct">${uWords[i]}</span>`);
        } else {
          errors++;
          parts.push(`<span class="wrong">${uWords[i]}</span>`);
        }
      }
      
      elCorrect.textContent = correct;
      elError.textContent = errors;
      elTyping.innerHTML = parts.join(" ");
    }
    
    elTyping.addEventListener("input", () => {
      if (testEnded) return;
      if (!startTime) {
        startTime = Date.now();
        timerInterval = setInterval(() => {
          const elapsed = (Date.now() - startTime) / 1000;
          elTime.textContent = elapsed.toFixed(1);
          elWpm.textContent = calcWPM(elTyping.innerText, elapsed);
        }, 200);
      }
      highlightText();
    });
    
    elTyping.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        if (!testEnded) {
          testEnded = true;
          clearInterval(timerInterval);
          const elapsed = (Date.now() - startTime) / 1000;
          elTime.textContent = elapsed.toFixed(1);
          elWpm.textContent = calcWPM(elTyping.innerText, elapsed);
          highlightText();
        }
      }
    });
    
    btnRandom.addEventListener("click", randomizePassage);
    
    randomizePassage(); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏™‡∏∏‡πà‡∏°
  </script>
</body>
</html>
